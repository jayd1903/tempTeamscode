<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>TeamsCode</title>
  <link href="https://fonts.googleapis.com/css?family=Roboto:400,500,700|Roboto+Mono:400,500,700" rel="stylesheet">
  <link rel="stylesheet" href="/css/screen.css">
  <link rel="shortcut icon" type="image/png" href="/assets/images/dark_logo.png">
  <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Inconsolata" />

  <!-- Sharing link information -->
  <meta property="og:site_name" content="TeamsCode"/>
  <meta property="og:description" content="TeamsCode is a student-run 501(c)(3) non-profit that works to encourage high school students to study computer science through team-focused programming contests!"/>
  <meta property="og:image" content="/assets/images/teamscode_share_graphic.png">
  <meta property="og:url" content="http://teamscode.com/">
  
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-109560289-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-109560289-1');
  </script>

</head>

  <body>
    <div class="post-lesson-layout">
      <div class="header">
  <div class="site-max-width">
    <div class="header-logo">
      <a href="/">
        <img src="/assets/images/dark_logo.svg" height="32" alt="teamscode"/>
      </a>
    </div>
    <div class="header-menu">
      <div class="header-menu-item">
        <a href="/learn">Learn</a>
      </div>
      <div class="header-menu-item">
        <a href="/contests">Contests</a>
      </div>
      <div class="header-menu-item">
        <a href="/press">Press</a>
      </div>
      <div class="header-menu-item">
        <a href="/blog">Blog</a>
      </div>
      <div class="header-menu-item">
        <a href="/contact">Contact</a>
      </div>
      <div class="header-menu-item">
        <a href="/about">About</a>
      </div>
    </div>
  </div>
</div>

      <script
  src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
  integrity="sha256-k2WSCIexGzOj3Euiig+TlR8gA0EmPjuc79OEeY5L45g="
  crossorigin="anonymous"></script>
<script
  src="https://cdnjs.cloudflare.com/ajax/libs/mo-js/0.288.1/mo.min.js"
  type="text/javascript"></script>
      <div class="content">
        
        <div class="post-lesson-body">
          <div class="post-lesson-max-width">
            <div class="row">
              <div class="column left sticky-l" id="sidebar">
                <a href="/learn/usaco/">
                  <div class="lesson-sidebar-title">
                    USACO Problems
                  </div>
                </a>
                
                  
                  
                    
                  
                    
                      <a href="/learn/usaco/#1"><div class="lesson-sidebar-header">
                        2015-2016 Usaco Platinum Contest
                      </div></a>
                      
                        <div >
                        <a href="/learn/usaco/2015-dec-1/">
  <div class="lesson-sidebar-item">
    Dec, Problem 1 | Max Flow
  </div>
</a>
                        </div>
                      
                        <div  class="current-lesson" >
                        <a href="/learn/usaco/2015-dec-2/">
  <div class="lesson-sidebar-item">
    Dec, Problem 2 | High Card Low Card (Platinum)
  </div>
</a>
                        </div>
                      
                        <div >
                        <a href="/learn/usaco/2015-dec-3/">
  <div class="lesson-sidebar-item">
    Dec, Problem 3 | Counting Haybales
  </div>
</a>
                        </div>
                      
                        <div >
                        <a href="/learn/usaco/2016-feb-1/">
  <div class="lesson-sidebar-item">
    Feb, Problem 1 | Load Balancing
  </div>
</a>
                        </div>
                      
                        <div >
                        <a href="/learn/usaco/2016-feb-2/">
  <div class="lesson-sidebar-item">
    Feb, Problem 2 | Fenced In
  </div>
</a>
                        </div>
                      
                        <div >
                        <a href="/learn/usaco/2016-jan-1/">
  <div class="lesson-sidebar-item">
    Jan, Problem 1 | Fort Moo
  </div>
</a>
                        </div>
                      
                        <div >
                        <a href="/learn/usaco/2016-open-1/">
  <div class="lesson-sidebar-item">
    Open, Problem 1 | 262144
  </div>
</a>
                        </div>
                      
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                
                  
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                
              </div>
              <div class="column right">

        <div class="post-lesson-header">
          <div class="post-lesson-max-width">
            <div class="post-lesson-header-section">
              <div class="h1">
                Dec, Problem 2 | High Card Low Card (Platinum)
              </div>
              <div class="post-lesson-header-section-info">
                <div><i>A writeup of Dec number 2 from the USACO platinum problem set</i></div>
              </div>
            </div>
          </div>
        </div>
              <hr style="background-color: #777; border-width: 0; height: 1px; margin-top: -15px">
                <script src="/questions.js"></script>

<h3 id="high-card-low-card-platinum"><a href="http://usaco.org/index.php?page=viewproblem2&amp;cpid=577">High Card Low Card (Platinum)</a></h3>

<h4 id="problem-statement">Problem Statement</h4>
<blockquote>
  <p>Bessie and her friend Elsie are currently playing a simple card game where they take a deck of 2N cards, conveniently numbered 1…2N, and divide them into N cards for Bessie and N cards for Elsie. The two then play N rounds, where in each round Bessie and Elsie both play a single card. Initially, the player who plays the highest card earns a point. However, at one point during the game, Bessie can decide to switch the rules so that for the rest of the game, the player who plays the lowest card wins a point. Bessie can choose not to use this option, leaving the entire game in “high card wins” mode, or she can even invoke the option right away, making the entire game follow the “low card wins” rule.</p>
</blockquote>

<p>In other words….</p>

<h4 id="sample">Sample</h4>
<p><strong>Input</strong></p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>4
1
8
4
3
</code></pre></div></div>
<p><strong>Output</strong>
<code class="highlighter-rouge">3</code></p>
<blockquote>
  <p>Here, Bessie must have cards 2, 5, and 6, and 7 in her hand, and she can use these to win at most 3 points. For example, she can defeat the 1 card and then switch the rules to “low card wins”, after which she can win two more rounds.</p>
  <h4 id="solution">Solution</h4>
  <p>Consider the case where Bessie never switches the rules. We can approach this with a greedy solution. Every time, Bessie either plays the lowest card that can beat Elsie’s card, or her lowest card if none of her cards are greater than Elsie’s card. This works because we want to maximize the number of points, and each card can only be used to get at most one point. That means, if there is an opportunity to win a point with our card, we should take it.</p>
</blockquote>

<p>Maintain a lookup for each index, where we store the maximum number of points we can win from the cards with index 1 to N.</p>

<p>Now, do the same thing but in reverse. Assume Bessie changes the rules immediately, and now work from right to left. Similarly, store the values in a suffix table.</p>

<p>We assert that we can combine the two tables to get the best answer.</p>
<blockquote>
  <p>e.g. <code class="highlighter-rouge">max([prefix[i] + suffix[i+1] for i in range(N)])</code></p>
</blockquote>

<p>The only problem that we may encounter is that there will be duplicates. For example, we both the suffix and prefix sum calculations use the same card. However, this can be alleviated easily. If there is a duplicate, there must also be an unused card. If this unused card is greater than the duplicate card, we can replace the duplicate card used in the suffix table with our unused card. Similar reasoning applies for the prefix table. That means, duplicates don’t matter.</p>

<h4 id="code">Code</h4>

<p>My solution can be found <a href="https://github.com/chen-robert/writeups/blob/master/data/docs/usaco/2015/code/_262144.java">here</a></p>


                <p style="color: #777; font-size: 14px;"><i>Written by Robert Chen</i></p>
                <p style="color: #777; font-size: 14px;">Notice any mistakes? Please email us at <a href="mailto:learn@teamcode.com">learn@teamscode.com</a> so that we can fix any inaccuracies. </p>
              </div>
            </div>
          </div>
        </div>
      </div>
      <script src="https://use.fontawesome.com/releases/v5.14.0/js/all.js"></script>
<div class="footer">
  <div class="site-max-width">
    <div class="footer-copyright">
      TeamsCode &copy; <script type="text/javascript">document.write(new Date().getFullYear());</script>
    </div>
    <div class="footer-social-menu">
      <div>
        <a href="https://instagram.com/teamscode" target="_blank">
          <i class="fab fa-instagram" aria-hidden="true"></i>
        </a>
      </div>
      <div>
        <a href="https://discord.gg/8pg89SS" target="_blank">
          <i class="fab fa-discord" aria-hidden="true"></i>
        </a>
      </div>
      <div>
        <a href="https://www.facebook.com/teamscode" target="_blank">
          <i class="fab fa-facebook" aria-hidden="true"></i>
        </a>
      </div>
      <div>
        <a href="https://github.com/teamscode" target="_blank">
          <i class="fab fa-github" aria-hidden="true"></i>
        </a>
      </div>
      <div>
        <a href="https://twitter.com/TeamsCode" target="_blank">
          <i class="fab fa-twitter" aria-hidden="true"></i>
        </a>
      </div>
    </div>
    <br>
    <div class="footer-copyright"style="font-size:12px">TeamsCode is a 501(c)(3) non-profit organization.</div>
    <div class="footer-copyright" style="font-size:12px">Website and materials not to be reproduced without prior written permission from TeamsCode Co-Presidents (Sean Yang and Ryan Hsu).</div>
  </div>
</div>

    </div>
  </body>

  <script>
  $(window).scroll(function(e){ 
    var $el = $('#sidebar'); 
    var isPositionFixed = ($el.css('position') == 'fixed');
    var bottomDist = $(window).scrollTop() >= $(document).height() - 500;
    if (!bottomDist && !isPositionFixed) { 
      $('#sidebar').addClass("sticky-l");
      $('#sidebar').removeClass("near-bottom-l"); 
    }
    if (bottomDist && isPositionFixed) {
      $('#sidebar').removeClass("sticky-l"); 
      $('#sidebar').addClass("near-bottom-l"); 
    }
  });
</script>
</html>