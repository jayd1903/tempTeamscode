<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>TeamsCode</title>
  <link href="https://fonts.googleapis.com/css?family=Roboto:400,500,700|Roboto+Mono:400,500,700" rel="stylesheet">
  <link rel="stylesheet" href="/css/screen.css">
  <link rel="shortcut icon" type="image/png" href="/assets/images/dark_logo.png">
  <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Inconsolata" />

  <!-- Sharing link information -->
  <meta property="og:site_name" content="TeamsCode"/>
  <meta property="og:description" content="TeamsCode is a student-run 501(c)(3) non-profit that works to encourage high school students to study computer science through team-focused programming contests!"/>
  <meta property="og:image" content="/assets/images/teamscode_share_graphic.png">
  <meta property="og:url" content="http://teamscode.com/">
  
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-109560289-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-109560289-1');
  </script>

</head>

  <body>
    <div class="post-lesson-layout">
      <div class="header">
  <div class="site-max-width">
    <div class="header-logo">
      <a href="/">
        <img src="/assets/images/dark_logo.svg" height="32" alt="teamscode"/>
      </a>
    </div>
    <div class="header-menu">
      <div class="header-menu-item">
        <a href="/learn">Learn</a>
      </div>
      <div class="header-menu-item">
        <a href="/contests">Contests</a>
      </div>
      <div class="header-menu-item">
        <a href="/press">Press</a>
      </div>
      <div class="header-menu-item">
        <a href="/blog">Blog</a>
      </div>
      <div class="header-menu-item">
        <a href="/contact">Contact</a>
      </div>
      <div class="header-menu-item">
        <a href="/about">About</a>
      </div>
    </div>
  </div>
</div>

      <script
  src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
  integrity="sha256-k2WSCIexGzOj3Euiig+TlR8gA0EmPjuc79OEeY5L45g="
  crossorigin="anonymous"></script>
<script
  src="https://cdnjs.cloudflare.com/ajax/libs/mo-js/0.288.1/mo.min.js"
  type="text/javascript"></script>
      <div class="content">
        
        <div class="post-lesson-body">
          <div class="post-lesson-max-width">
            <div class="row">
              <div class="column left sticky-l" id="sidebar">
                <a href="/learn/usaco/">
                  <div class="lesson-sidebar-title">
                    USACO Problems
                  </div>
                </a>
                
                  
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                      <a href="/learn/usaco/#1"><div class="lesson-sidebar-header">
                        2015-2016 Usaco Platinum Contest
                      </div></a>
                      
                        <div >
                        <a href="/learn/usaco/2015-dec-1/">
  <div class="lesson-sidebar-item">
    Dec, Problem 1 | Max Flow
  </div>
</a>
                        </div>
                      
                        <div >
                        <a href="/learn/usaco/2015-dec-2/">
  <div class="lesson-sidebar-item">
    Dec, Problem 2 | High Card Low Card (Platinum)
  </div>
</a>
                        </div>
                      
                        <div >
                        <a href="/learn/usaco/2015-dec-3/">
  <div class="lesson-sidebar-item">
    Dec, Problem 3 | Counting Haybales
  </div>
</a>
                        </div>
                      
                        <div >
                        <a href="/learn/usaco/2016-feb-1/">
  <div class="lesson-sidebar-item">
    Feb, Problem 1 | Load Balancing
  </div>
</a>
                        </div>
                      
                        <div  class="current-lesson" >
                        <a href="/learn/usaco/2016-feb-2/">
  <div class="lesson-sidebar-item">
    Feb, Problem 2 | Fenced In
  </div>
</a>
                        </div>
                      
                        <div >
                        <a href="/learn/usaco/2016-jan-1/">
  <div class="lesson-sidebar-item">
    Jan, Problem 1 | Fort Moo
  </div>
</a>
                        </div>
                      
                        <div >
                        <a href="/learn/usaco/2016-open-1/">
  <div class="lesson-sidebar-item">
    Open, Problem 1 | 262144
  </div>
</a>
                        </div>
                      
                    
                  
                    
                  
                    
                  
                
                  
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                
              </div>
              <div class="column right">

        <div class="post-lesson-header">
          <div class="post-lesson-max-width">
            <div class="post-lesson-header-section">
              <div class="h1">
                Feb, Problem 2 | Fenced In
              </div>
              <div class="post-lesson-header-section-info">
                <div><i>A writeup of Feb number 2 from the USACO platinum problem set</i></div>
              </div>
            </div>
          </div>
        </div>
              <hr style="background-color: #777; border-width: 0; height: 1px; margin-top: -15px">
                <script src="/questions.js"></script>

<h3 id="fenced-in"><a href="http://usaco.org/index.php?page=viewproblem2&amp;cpid=625">Fenced In</a></h3>

<h5 id="problem-statement">Problem Statement</h5>
<blockquote>
  <p>The large field is a rectangle with corner points at (0,0) and (A,B). FJ builds n vertical fences and m horizontal fences. Each vertical fence crosses through each horizontal fence, subdividing the large field into a total of (n+1)(m+1) regions.
Unfortunately, FJ completely forgot to build gates into his fences, making it impossible for cows to leave their enclosing region and travel around the entire field! He wants to remedy this situation by removing pieces of some of his fences to allow cows to travel between adjacent regions. He wants to select certain pairs of adjacent regions and remove the entire length of fence separating them; afterwards, he wants cows to be able to wander through these openings so they can travel anywhere in his larger field.</p>
</blockquote>

<p>For example,</p>
<blockquote>
  <p>FJ might take a fence pattern looking like this:
+—+—+
|⠀⠀⠀|⠀⠀ |
+—+—+
|⠀⠀⠀|⠀⠀ |
|⠀⠀⠀|⠀⠀ |
+—+—+
and open it up like so:
+—+—+
|⠀⠀⠀ ⠀⠀ |
+—+⠀⠀+
|⠀⠀⠀ ⠀⠀ |
|⠀⠀⠀ ⠀⠀ |
+—+—+</p>
</blockquote>

<h4 id="mst">MST</h4>
<p>The key insight is that we can represent this problem as a Minimum Spanning Tree (MST). We represent each individual grid as a node on the MST. Edges between nodes are the fences that FJ can remove. Specifically, the edge length is the length of the fence.</p>

<p>As an example, we can represent the above diagram as thus. 
<img src="https://raw.githubusercontent.com/chen-robert/writeups/master/usaco/assets/mst.jpg" alt="" /></p>

<h4 id="kruskals-mst-algo">Kruskal’s MST Algo</h4>
<p>If we try to solve this the naive way, we get timed out. Traditional MST algorithms run in <strong>O(N log N)</strong>. Because we actually have <strong>N^2</strong> regions, this means our runtime is <strong>O(N^2 log N)</strong>.</p>

<p>Note that for every horizontal edge, there are a total of <strong>n</strong> other edges with the same length. Similar logic applies for vertical edges, with a total of <strong>m</strong> instead.</p>

<p>Consider the edge with shortest length. By Kruskal’s, we need to add as many of these edges as possible, as long as we keep our tree. The exact number of times we need to add the edge can be calculated by subtracting the number of edges in the opposite orientation already added from the max amount.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">edgesToAdd</span> <span class="o">=</span> <span class="p">(</span><span class="n">m</span> <span class="o">-</span> <span class="n">verticalLines</span><span class="p">)</span> <span class="k">if</span> <span class="n">currentEdge</span><span class="o">.</span><span class="n">horizontal</span> <span class="k">else</span> <span class="p">(</span><span class="n">n</span> <span class="o">-</span> <span class="n">horizontalLines</span><span class="p">)</span>
</code></pre></div></div>

<h4 id="code">Code</h4>

<p>My solution can be found <a href="https://github.com/chen-robert/writeups/blob/master/data/docs/usaco/2015/code/fencedin.java">here</a></p>


                <p style="color: #777; font-size: 14px;"><i>Written by Robert Chen</i></p>
                <p style="color: #777; font-size: 14px;">Notice any mistakes? Please email us at <a href="mailto:learn@teamcode.com">learn@teamscode.com</a> so that we can fix any inaccuracies. </p>
              </div>
            </div>
          </div>
        </div>
      </div>
      <script src="https://use.fontawesome.com/releases/v5.14.0/js/all.js"></script>
<div class="footer">
  <div class="site-max-width">
    <div class="footer-copyright">
      TeamsCode &copy; <script type="text/javascript">document.write(new Date().getFullYear());</script>
    </div>
    <div class="footer-social-menu">
      <div>
        <a href="https://instagram.com/teamscode" target="_blank">
          <i class="fab fa-instagram" aria-hidden="true"></i>
        </a>
      </div>
      <div>
        <a href="https://discord.gg/8pg89SS" target="_blank">
          <i class="fab fa-discord" aria-hidden="true"></i>
        </a>
      </div>
      <div>
        <a href="https://www.facebook.com/teamscode" target="_blank">
          <i class="fab fa-facebook" aria-hidden="true"></i>
        </a>
      </div>
      <div>
        <a href="https://github.com/teamscode" target="_blank">
          <i class="fab fa-github" aria-hidden="true"></i>
        </a>
      </div>
      <div>
        <a href="https://twitter.com/TeamsCode" target="_blank">
          <i class="fab fa-twitter" aria-hidden="true"></i>
        </a>
      </div>
    </div>
    <br>
    <div class="footer-copyright"style="font-size:12px">TeamsCode is a 501(c)(3) non-profit organization.</div>
    <div class="footer-copyright" style="font-size:12px">Website and materials not to be reproduced without prior written permission from TeamsCode Co-Presidents (Sean Yang and Ryan Hsu).</div>
  </div>
</div>

    </div>
  </body>

  <script>
  $(window).scroll(function(e){ 
    var $el = $('#sidebar'); 
    var isPositionFixed = ($el.css('position') == 'fixed');
    var bottomDist = $(window).scrollTop() >= $(document).height() - 500;
    if (!bottomDist && !isPositionFixed) { 
      $('#sidebar').addClass("sticky-l");
      $('#sidebar').removeClass("near-bottom-l"); 
    }
    if (bottomDist && isPositionFixed) {
      $('#sidebar').removeClass("sticky-l"); 
      $('#sidebar').addClass("near-bottom-l"); 
    }
  });
</script>
</html>